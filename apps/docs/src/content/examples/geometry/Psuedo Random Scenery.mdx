---
category: Geometry
title: Psuedo Random Scenery
showInSidebar: false
---

## Starting With Random

Within your scene, suppose you've decided you'd like some randomly generated objects. Here you can explore some of the ways you could do that and hopefully find a place you'd like to build from on your own.

<Tip type="note">
  Explicitly placing objects is also a good enough approach in many projects. You could even start
  from a random scene, then save all the object properties and create a svelte file representing the
  randomly generated scene.
</Tip>

A simple starting point is complete randomness. Below is a flat plane, a couple of `{#each ... as ...}` blocks and a function call to create a bunch of random numbers to pass onto the objects within the scene.

<Example path="geometry/psuedo-random-scenery/starting-with-random" />

## Randomly Poisson

If you noticed some placement issues with the scene above i.e. sometimes some trees are placed too close to one-another, or maybe a tree looks like its growing from a rock; then you need a better solution. Enter [Poisson Disk Sampling](https://medium.com/@hemalatha.psna/implementation-of-poisson-disc-sampling-in-javascript-17665e406ce1). With this algorithm you can guarantee a minimum radius around your objects. It will be used below but it's details won't be discussed here.

<Example path="geometry/psuedo-random-scenery/poisson-disc-sampling" />

If you reduce the `min Distance Between Objects` to something smaller than your objects size then there will _look_ like there's collisions. In the case of the bushes above, even with a min distance of 1 it still looks good.

### Poisson but different

You could leave the algorithm as is if it suits your project. Below I've adjusted the algorithms implementation to allow for some variation in the distances between the points. Doing so means you can distinguish between points that should map to larger or smaller objects.

<Example path="geometry/psuedo-random-scenery/adjusted-sampling" />

<Tip type="note">
  Part of adjusting the algorithm to be able to do that meant adjusting what I'll call the search
  window size. If you have a large difference in radius between your smallest and largest objects
  this might slow things down. Not sure where the boundary values for that are so play around with
  it until it suits.
</Tip>

## Pseudo Random

Putting pseudo randomness in is simple to tackle. All you need to do is to create a function that returns numbers that _look_ random and pass it into our sampler. This can be achieved by storing a bunch of random numbers generated by `Math.random()` and then making a function which yeilds those numbers endlessly.

```javascript title='pseudoRandom.js'
const numbers = []
let index = 0

for (let i = 0; i < 1000; i++) {
  numbers.push(Math.random())
}

export function pseudoRandom() {
  index += 1
  if (index == numbers.length - 1) {
    index = -1
    return numbers[numbers.length - 1]
  }
  return numbers[index]
}
```

```javascript title='scene.js'
import { pseudoRandom } from './pseudoRandom.js'

let sampler = new Sampler(pointsMatrix, { width, height }, undefined, pseudoRandom)
```
