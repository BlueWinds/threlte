---
order: 13
category: '@threlte/extras'
sourcePath: 'packages/extras/src/lib/hooks/useGamepad.ts'
name: useGamepad
type: 'hook'
---

A hook that will provide a [`currentWritable`](/docs/reference/core/utilities#currentwritable) reference to a [Gamepad](https://developer.mozilla.org/en-US/docs/Web/API/Gamepad) when connected.

```svelte
<script lang="ts">
  import { useGamepad } from '@threlte/extras'

  const { gamepad } = useGamepad()
</script>
```

More than one gamepad can be connected at any given time, so an optional `index` can be specified.

```svelte
<script lang="ts">
  import { useGamepad } from '@threlte/extras'

  const { gamepad } = useGamepad({ index: 0 })
  const { gamepad: gamepad2 } = useGamepad({ index: 1 })
</script>
```

The `gamepad` store value will be `null` until a gamepad connects, and will become `null` again once a gamepad disconnects.

```svelte
<script lang="ts">
  import { useFrame } from '@threlte/core'
  import { useGamepad } from '@threlte/extras'

  const { gamepad } = useGamepad()

  useFrame(() => {
    if (gamepad.current) {
      // A gamepad is connected!
    }
  })
</script>
```

<Tip type="warning">
  Gamepad data is fetched as an immutable snapshot on every frame, so a reference to `$gamepad` or `gamepad.current` will become stale on the next frame.
</Tip>

### Connection status

The hook provides a `gamepadConnected` boolean store to react to gamepad connection.

```svelte
<script lang="ts">
  import { useGamepad } from '@threlte/extras'

  const { gamepadConnected } = useGamepad()
  
  $: console.log(`A gamepad ${$gamepadConnected ? 'connected' : 'disconnected'}!`)
</script>
```

### Standard gamepad layout

If the button and axis layout of the gamepad corresponds with the [Standard Gamepad layout](https://w3c.github.io/gamepad/#remapping), a more convienent `standardGamepad` object can be used if a `{ mapping: 'standard' }` option is passed to the hook.

The `standardGamepad` provides properties to more easily access button or joystick values.

```svelte
<script lang="ts">
  import { useFrame } from '@threlte/core'
  import { useGamepad } from '@threlte/extras'

  const { standardGamepad } = useGamepad({ mapping: 'standard' })
  
  useFrame(() => {
    console.log(standardGamepad.leftStick.x, standardGamepad.leftStick.y)
    console.log(standardGamepad.leftBumper.value)
    console.log(standardGamepad.rightTrigger.value)
  })
</script>
```

Event listeners can also be attached to buttons or joysticks, or the gamepad itself.

```svelte
<script lang="ts">
  import { useFrame } from '@threlte/core'
  import { useGamepad } from '@threlte/extras'

  const { standardGamepad } = useGamepad({ mapping: 'standard' })
  
  standardGamepad.leftTrigger.on('down', (event) => {
    console.log('The left trigger has just been pressed!')
  })

  standardGamepad.leftStick.on('change', (event) => {
    console.log(`Left stick moved: ${event.value.x}, ${event.value.y}`)
  })
  
  standardGamepad.on('press', (event) => {
    console.log(`A ${event.type} event on ${event.target} occurred: ${event.value}`)
  })
</script>
```

### Button mapping and events

The `standardGamepad` object maps the 17 standard gamepad buttons and 4 axes to:

* The four right cluster buttons: `clusterBottom`, `clusterRight`, `clusterLeft`, `clusterTop`.
* The four top buttons: `leftBumper`, `rightBumper`, `leftTrigger`, `rightTrigger`.
* The center buttons: `select`, `start`, `center`.
* The joystick axes and buttons: `leftStickButton`, `leftStick`, `rightStickButton`, `rightStick`.
* The directional pad: `directionalTop`, `directionalBottom`, `directionalLeft`, `directionalRight`.

The available events for mapped buttons are the following:

* `change` will fire whenever the `value` of the stick or button changes. This is helpful for buttons or joysticks that can have continuous values.
* `press` will fire if a button is pressed.
* `down` will fire when a button press begins.
* `up` will fire when a button press ends. 
* `touch` is supported by some gamepads, and will fire if a small amount of pressure on a button is detected.
* `touchstart` will fire when a touch begins,
* and `touchend` will fire when a touch ends.
